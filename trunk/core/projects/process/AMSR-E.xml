<?xml version="1.0" encoding="UTF-8"?>
<sml:SensorML xmlns:gml="http://www.opengis.net/gml" xmlns:sml="http://www.opengis.net/sensorML/1.0" xmlns:swe="http://www.opengis.net/swe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/sensorML/1.0 file:///C:\eclipse_workspace\schema\sensorML\sensorML.xsd" version="1.0">
   <sml:member>
      <sml:ProcessChain gml:id="AMSR-E_GEOLOCATION">
 <gml:description>
       This process chain determines AMSR-E position vector and the ECEF view vector. This chain is composed of 2 chains,
       one specific to AMSR-E, the other is generic.
 </gml:description>
      <gml:name>AMSR-E</gml:name>
 <sml:inputs>
    <sml:InputList>
       <sml:input name="julianTime">
          <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
             <swe:uom code="s"/>
          </swe:Time>
       </sml:input>
       <sml:input name="pixel">
             <swe:Quantity/>
       </sml:input>
       <sml:input name="channelNumber">
          <swe:Quantity>
             <swe:value>1.0</swe:value>
          </swe:Quantity>
       </sml:input>
        <sml:input name="satelliteAngle">
            <swe:Quantity>
                <swe:uom code="rad"/>
               <swe:value>0.0</swe:value>
            </swe:Quantity>
        </sml:input>
       <sml:input name="attitudeOrientation">
          <swe:Vector definition="urn:ogc:def:data:orientationVector">
             <swe:coordinate name="x">
                <swe:Quantity>
                   <swe:uom code="rad"/>
                   <swe:value>0.0</swe:value>
                </swe:Quantity>
             </swe:coordinate>
             <swe:coordinate name="y">
                <swe:Quantity>
                   <swe:uom code="rad"/>
                   <swe:value>0.0</swe:value>
                </swe:Quantity>
             </swe:coordinate>
             <swe:coordinate name="z">
                <swe:Quantity>
                   <swe:uom code="rad"/>
                   <swe:value>0.0</swe:value>
                </swe:Quantity>
             </swe:coordinate>
          </swe:Vector>
       </sml:input> 
    </sml:InputList>
 </sml:inputs>
 <sml:outputs>
    <sml:OutputList>
       <sml:output name="geolocationData">
          <swe:DataRecord>
             <swe:field name="ECEF_location">
                <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                   <swe:coordinate name="x">
                      <swe:Quantity>
                         <swe:uom code="m"/>
                      </swe:Quantity>
                   </swe:coordinate>
                   <swe:coordinate name="y">
                      <swe:Quantity>
                         <swe:uom code="m"/>
                      </swe:Quantity>
                   </swe:coordinate>
                   <swe:coordinate name="z">
                      <swe:Quantity>
                         <swe:uom code="m"/>
                      </swe:Quantity>
                   </swe:coordinate>
                </swe:Vector>
             </swe:field>
             <swe:field name="ECEF_view_vector">
                <swe:Vector definition="urn:ogc:def:data:viewVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                   <swe:coordinate name="x">
                      <swe:Quantity>
                         <swe:uom code="m"/>
                      </swe:Quantity>
                   </swe:coordinate>
                   <swe:coordinate name="y">
                      <swe:Quantity>
                         <swe:uom code="m"/>
                      </swe:Quantity>
                   </swe:coordinate>
                   <swe:coordinate name="z">
                      <swe:Quantity>
                         <swe:uom code="m"/>
                      </swe:Quantity>
                   </swe:coordinate>
                </swe:Vector>
             </swe:field>
          </swe:DataRecord>
       </sml:output>
    </sml:OutputList>
 </sml:outputs>
 <sml:components>
  <sml:ComponentList>    
     <!--~~~~~~~~~~~~~~~~~~-->
     <!--~~~~~~~~~~~~~~~~~~-->
     <!-- 1st chain -->
     <!--~~~~~~~~~~~~~~~~~~-->  
     <!--~~~~~~~~~~~~~~~~~~-->
  <sml:component name="AMSR-E_specific">
   <sml:ProcessChain>
      <gml:description>
            This process chain determines the matrix to tansform the sample view vector into the satellite view
            vector in function of the channel and x pixel. This chain is AMSR-E SPECIFIC.
      </gml:description>
      <!--~~~~~~~~~~~~~~~~~~-->
      <!-- Inputs & Outputs -->
      <!--~~~~~~~~~~~~~~~~~~-->
       <sml:inputs>
           <sml:InputList>
               <sml:input name="julianTime">
                  <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                       <swe:uom code="s"/>
                   </swe:Time>
               </sml:input>
               <sml:input name="pixel">
                   <swe:Quantity/>
               </sml:input>
               <sml:input name="channelNumber">
                   <swe:Quantity/>
               </sml:input>
           </sml:InputList>
       </sml:inputs>
      <sml:outputs>
         <sml:OutputList>
            <sml:output name="Satellite_view_vector">
               <swe:Vector definition="urn:ogc:def:data:viewVector">
                  <swe:coordinate name="x">
                     <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                       <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="y">
                     <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="z">
                     <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
               </swe:Vector>
            </sml:output> 
            <sml:output name="pixelJulianTime">
                 <swe:Quantity/>
             </sml:output>
         </sml:OutputList>
      </sml:outputs>
      <sml:components>
         <sml:ComponentList>
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <!-- Binary arithmeric to normalize along scan pixel -->
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="BinaryBeforeNorm">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="operand1">
                           <swe:Quantity/>
                        </sml:input>
                        <sml:input name="operand2">
                           <swe:Quantity>
                              <swe:value>1</swe:value>
                           </swe:Quantity>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="result">
                           <swe:Quantity/>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="operator">
                           <swe:Category>
                              <swe:value>soustraction</swe:value>
                           </swe:Category>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:vast:def:process:binaryOperation:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <!-- LUT number of pixel for normalization -->
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="LUTpixelNumber">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="channelNumber">
                              <swe:Quantity/>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="pixelNumber">
                           <swe:Quantity/>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="interpolationMethod">
                           <swe:Category>
                              <swe:value>linear</swe:value>
                           </swe:Category>
                        </sml:parameter>
                        <sml:parameter name="table">
                           <swe:Curve>
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>16</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType>
                                 <swe:SimpleDataRecord>
                                    <swe:field name="channelNumber">
                                       <swe:Quantity/>
                                    </swe:field>
                                     <swe:field name="pixelNumber">
                                       <swe:Quantity/>
                                    </swe:field>
                                 </swe:SimpleDataRecord>
                              </swe:elementType>
                              <swe:encoding>
                                 <swe:TextBlock tokenSeparator="," blockSeparator=" " decimalSeparator="."/>
                              </swe:encoding>
                              <swe:values>
                                 1.0,243.0
                                 2.0,243.0
                                 3.0,243.0
                                 4.0,243.0
                                 5.0,243.0
                                 6.0,243.0
                                 7.0,243.0
                                 8.0,243.0
                                 9.0,243.0
                                 10.0,243.0
                                 11.0,195.0
                                 12.0,195.0
                                 13.0,391.0
                                 14.0,391.0
                                 15.0,391.0
                                 16.0,391.0                                
                              </swe:values>
                           </swe:Curve>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:ogc:def:process:LUT1D:1.0"/>
               </sml:ProcessModel>
            </sml:component> 
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <!-- Binary arithmeric to normalize along scan pixel -->
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="BinaryPixelNorm">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="operand1">
                           <swe:Quantity/>
                        </sml:input>
                        <sml:input name="operand2">
                              <swe:Quantity/>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="result">
                           <swe:Quantity/>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="operator">
                           <swe:Category>
                              <swe:value>division</swe:value>
                           </swe:Category>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:vast:def:process:binaryOperation:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <!-- LUT scan angle-->
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="LUTangle">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="Normalized_pixel">
                           <swe:Quantity definition="urn:ogc:def:data:normalizedIndex"/>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="scanAngle">
                           <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                            <swe:uom code="rad"/>
                           </swe:Quantity>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="interpolationMethod">
                           <swe:Category>
                              <swe:value>linear</swe:value>
                           </swe:Category>
                        </sml:parameter>
                        <sml:parameter name="table">
                           <swe:Curve>
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>2</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType>
                                 <swe:SimpleDataRecord>
                                    <swe:field name="Normalized_pixel">
                                       <swe:Quantity/>
                                    </swe:field>
                                    <swe:field name="scanAngle">
                                       <swe:Quantity/>
                                    </swe:field>
                                 </swe:SimpleDataRecord>
                              </swe:elementType>
                              <swe:encoding>
                                 <swe:TextBlock tokenSeparator="," blockSeparator=" " decimalSeparator="."/>
                              </swe:encoding>
                              <swe:values>
                                 0.0,-2.9454471705114376611547730604178
                                 1.0,-0.1961454830783555773078703228617                               
                              </swe:values>
                           </swe:Curve>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:ogc:def:process:LUT1D:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <!-- LUT pointing angle-->
            <!--~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="LUTpointingAngle">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="channelNumber">
                           <swe:Quantity definition="urn:ogc:def:data:normalizedIndex"/>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="pointingAngle">
                           <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                              <swe:uom code="rad"/>
                           </swe:Quantity>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="interpolationMethod">
                           <swe:Category>
                              <swe:value>linear</swe:value>
                           </swe:Category>
                        </sml:parameter>
                        <sml:parameter name="table">
                           <swe:Curve>
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>16</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType>
                                 <swe:SimpleDataRecord>
                                    <swe:field name="channelNumber">
                                       <swe:Quantity/>
                                    </swe:field>
                                    <swe:field name="pointingAngle">
                                       <swe:Quantity/>
                                    </swe:field>
                                 </swe:SimpleDataRecord>
                              </swe:elementType>
                              <swe:encoding>
                                 <swe:TextBlock tokenSeparator="," blockSeparator=" " decimalSeparator="."/>
                              </swe:encoding><!--0.829031395-->
                              <swe:values>
                                 1.0,0.787031395
                                 2.0,0.787031395
                                 3.0,0.787031395
                                 4.0,0.787031395
                                 5.0,0.787031395
                                 6.0,0.787031395
                                 7.0,0.787031395
                                 8.0,0.787031395
                                 9.0,0.787031395
                                 10.0,0.787031395
                                 11.0,0.800031395
                                 12.0,0.829031395
                                 13.0,0.820304748
                                 14.0,0.820304748
                                 15.0,0.820304748
                                 16.0,0.820304748                                 
                              </swe:values>
                           </swe:Curve>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:ogc:def:process:LUT1D:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Matrix builder from sample 2 instrument  -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->                     
            <sml:component name="MatrixBuilderInstrument">
             <sml:ProcessModel>
               <sml:inputs>
                  <sml:InputList>
                     <sml:input name="orientation">
                        <swe:Vector definition="urn:ogc:def:data:orientationVector">
                           <swe:coordinate name="x">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                 <swe:uom code="rad"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="y">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                <swe:uom code="rad"/>
                                <swe:value>0.0</swe:value>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="z">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                 <swe:uom code="rad"/>
                                 <swe:value>0.0</swe:value>
                              </swe:Quantity>
                           </swe:coordinate>
                        </swe:Vector>
                     </sml:input>
                  </sml:InputList>
               </sml:inputs>
               <sml:outputs>
                  <sml:OutputList>
                     <sml:output name="posMatrix">
                        <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                           <swe:elementCount>
                              <swe:Count>
                                 <swe:value>9</swe:value>
                              </swe:Count>
                           </swe:elementCount>
                           <swe:elementType name="element">
                              <swe:Quantity/>
                           </swe:elementType>
                        </swe:DataArray>
                     </sml:output>
                  </sml:OutputList>
               </sml:outputs>
               <sml:method xlink:href="urn:ogc:def:process:pos2Matrix3:1.0"/>
               </sml:ProcessModel>
            </sml:component>    
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->
            <!--transformation from sample to satellite view vector  -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->  
            <sml:component name="VectorMatrixMultiplierInstrument">                       
            <sml:ProcessModel>
               <sml:inputs>
                  <sml:InputList>  
                     <sml:input name="vector">
                        <swe:Vector definition="urn:ogc:def:data:viewVector">
                           <swe:coordinate name="x">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                               <swe:uom code="m"/>
                               <swe:value>0.0</swe:value>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="y">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                                 <swe:value>0.0</swe:value>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="z">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                                 <swe:value>-1.0</swe:value>
                              </swe:Quantity>
                           </swe:coordinate>
                        </swe:Vector>
                     </sml:input>            
                     <sml:input name="transformMatrix">
                        <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                           <swe:elementCount>
                              <swe:Count>
                                 <swe:value>9</swe:value>
                              </swe:Count>
                           </swe:elementCount>
                           <swe:elementType name="element">
                              <swe:Quantity/>
                           </swe:elementType>
                        </swe:DataArray>
                     </sml:input>
                  </sml:InputList>
               </sml:inputs>
               <sml:outputs>
                  <sml:OutputList>
                     <sml:output name="newVector">
                        <swe:Vector definition="urn:ogc:def:data:viewVector">
                           <swe:coordinate name="x">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="y">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                               <swe:uom code="m"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="z">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                              </swe:Quantity>
                           </swe:coordinate>
                        </swe:Vector>
                       </sml:output>
                  </sml:OutputList>
               </sml:outputs>
               <sml:method xlink:href="urn:ogc:def:process:vectorMatrixMultiplication:1.0"/>
            </sml:ProcessModel>
           </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Matrix builder from sample 2 instrument  -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->                     
            <sml:component name="MatrixBuilderSatellite">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="orientation">
                           <swe:Vector definition="urn:ogc:def:data:orientationVector">
                              <swe:coordinate name="x">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                    <swe:uom code="rad"/>
                                    <swe:value>0</swe:value>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                    <swe:uom code="rad"/>
                                    <swe:value>0.0</swe:value>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                    <swe:uom code="rad"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="posMatrix">
                           <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>9</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType name="element">
                                 <swe:Quantity/>
                              </swe:elementType>
                           </swe:DataArray>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:method xlink:href="urn:ogc:def:process:pos2Matrix3:1.0"/>
               </sml:ProcessModel>
            </sml:component>    
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->
            <!--transformation from sample to satellite view vector  -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->  
            <sml:component name="VectorMatrixMultiplierSatellite">                       
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>  
                        <sml:input name="vector">
                           <swe:Vector definition="urn:ogc:def:data:viewVector">
                              <swe:coordinate name="x">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>            
                        <sml:input name="transformMatrix">
                           <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>9</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType name="element">
                                 <swe:Quantity/>
                              </swe:elementType>
                           </swe:DataArray>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="newVector">
                           <swe:Vector definition="urn:ogc:def:data:viewVector">
                              <swe:coordinate name="x">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:method xlink:href="urn:ogc:def:process:vectorMatrixMultiplication:1.0"/>
               </sml:ProcessModel>
            </sml:component>
             <!--~~~~~~~~~~~~~~~~~~~~-->
             <!-- LUT pixel time -->
             <!--~~~~~~~~~~~~~~~~~~~~-->
             <sml:component name="LUTpixelTime">
                 <sml:ProcessModel>
                     <sml:inputs>
                         <sml:InputList>
                             <sml:input name="Normalized_pixel">
                                 <swe:Quantity definition="urn:ogc:def:data:normalizedIndex"/>
                             </sml:input>
                         </sml:InputList>
                     </sml:inputs>
                     <sml:outputs>
                         <sml:OutputList>
                             <sml:output name="deltaTime">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:duration">
                                     <swe:uom code="s"/>
                                 </swe:Quantity>
                             </sml:output>
                         </sml:OutputList>
                     </sml:outputs>
                     <sml:parameters>
                         <sml:ParameterList>
                             <sml:parameter name="interpolationMethod">
                                 <swe:Category>
                                     <swe:value>linear</swe:value>
                                 </swe:Category>
                             </sml:parameter>
                             <sml:parameter name="table">
                                 <swe:Curve>
                                     <swe:elementCount>
                                         <swe:Count>
                                             <swe:value>2</swe:value>
                                         </swe:Count>
                                     </swe:elementCount>
                                     <swe:elementType>
                                         <swe:SimpleDataRecord>
                                             <swe:field name="Normalized_pixel">
                                                 <swe:Quantity/>
                                             </swe:field>
                                             <swe:field name="deltaTime">
                                                 <swe:Quantity/>
                                             </swe:field>
                                         </swe:SimpleDataRecord>
                                     </swe:elementType>
                                    <swe:encoding>
                                       <swe:TextBlock tokenSeparator="," blockSeparator=" " decimalSeparator="."/>
                                    </swe:encoding>
                                     <swe:values>
                                        0.0,0                                      
                                        1.0,0.508333333333333                                      
                                     </swe:values>
                                 </swe:Curve>
                             </sml:parameter>
                         </sml:ParameterList>
                     </sml:parameters>
                     <sml:method xlink:href="urn:ogc:def:process:LUT1D:1.0"/>
                 </sml:ProcessModel>
             </sml:component>
             <!--~~~~~~~~~~~~~~~~~~~~-->
             <!-- Binary arithmeric to determine the delta time between pixel integration -->
             <!--~~~~~~~~~~~~~~~~~~~~-->
             <sml:component name="BinaryPixelTime">
                 <sml:ProcessModel>
                     <sml:inputs>
                         <sml:InputList>
                             <sml:input name="operand1">
                                 <swe:Quantity/>
                             </sml:input>
                             <sml:input name="operand2">
                                 <swe:Quantity/>
                             </sml:input>
                         </sml:InputList>
                     </sml:inputs>
                     <sml:outputs>
                         <sml:OutputList>
                             <sml:output name="result">
                                 <swe:Quantity/>
                             </sml:output>
                         </sml:OutputList>
                     </sml:outputs>
                     <sml:parameters>
                         <sml:ParameterList>
                             <sml:parameter name="operator">
                                 <swe:Category>
                                     <swe:value>addition</swe:value>
                                 </swe:Category>
                             </sml:parameter>
                         </sml:ParameterList>
                     </sml:parameters>
                     <sml:method xlink:href="urn:vast:def:process:binaryOperation:1.0"/>
                 </sml:ProcessModel>
             </sml:component>
         </sml:ComponentList>
      </sml:components>
      <!--~~~~~~~~~~~~~-->
      <!-- Connections -->
      <!--~~~~~~~~~~~~~-->
      <sml:connections>
         <sml:ConnectionList>
            <!-- Chain inputs to processes inputs -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/channelNumber"/>
                  <sml:destination ref="LUTpointingAngle/inputs/channelNumber"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="LUTpointingAngle/outputs/pointingAngle"/>
                  <sml:destination ref="MatrixBuilderInstrument/inputs/orientation/x"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/channelNumber"/>
                   <sml:destination ref="LUTpixelNumber/inputs/channelNumber"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/pixel"/>
                  <sml:destination ref="BinaryBeforeNorm/inputs/operand1"/>
               </sml:Link>
            </sml:connection> 
            <sml:connection>
               <sml:Link>
                  <sml:source ref="BinaryBeforeNorm/outputs/result"/>
                   <sml:destination ref="BinaryPixelNorm/inputs/operand1"/>
               </sml:Link>
            </sml:connection> 
             <sml:connection>
                 <sml:Link>
                     <sml:source ref="this/inputs/julianTime"/>
                     <sml:destination ref="BinaryPixelTime/inputs/operand1"/>
                 </sml:Link>
             </sml:connection>
             <!-- Processes outputs to other processes inputs --> 
             <sml:connection>
                 <sml:Link>
                     <sml:source ref="LUTpixelNumber/outputs/pixelNumber"/>
                     <sml:destination ref="BinaryPixelNorm/inputs/operand2"/>
                 </sml:Link>
             </sml:connection>
             <sml:connection>
                 <sml:Link>
                     <sml:source ref="LUTpixelNumber/outputs/pixelNumber"/>
                     <sml:destination ref="LUTpixelTime/inputs/Normalized_pixel"/>
                 </sml:Link>
             </sml:connection>  
            <sml:connection>
               <sml:Link>
                   <sml:source ref="BinaryPixelNorm/outputs/result"/>
                   <sml:destination ref="LUTangle/inputs/Normalized_pixel"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                   <sml:source ref="LUTpixelTime/outputs/deltaTime"/>
                   <sml:destination ref="BinaryPixelTime/inputs/operand2"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                   <sml:source ref="LUTangle/outputs/scanAngle"/>
                  <sml:destination ref="MatrixBuilderSatellite/inputs/orientation/z"/>
               </sml:Link>
            </sml:connection>
             <sml:connection>
                 <sml:Link>
                     <sml:source ref="MatrixBuilderInstrument/outputs/posMatrix"/>
                     <sml:destination ref="VectorMatrixMultiplierInstrument/inputs/transformMatrix"/>
                 </sml:Link>
             </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="VectorMatrixMultiplierInstrument/outputs/newVector"/>
                  <sml:destination ref="VectorMatrixMultiplierSatellite/inputs/vector"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="MatrixBuilderSatellite/outputs/posMatrix"/>
                  <sml:destination ref="VectorMatrixMultiplierSatellite/inputs/transformMatrix"/>
               </sml:Link>
            </sml:connection>
            <!-- Last processes outputs to chain outputs -->      
            <sml:connection>
               <sml:Link>
                  <sml:source ref="VectorMatrixMultiplierSatellite/outputs/newVector"/>
                  <sml:destination ref="this/outputs/Satellite_view_vector"/>
               </sml:Link>
            </sml:connection>   
             <sml:connection>
                 <sml:Link>
                     <sml:source ref="BinaryPixelTime/outputs/result"/>
                    <sml:destination ref="this/outputs/pixelJulianTime"/>
                 </sml:Link>
             </sml:connection>  
         </sml:ConnectionList>
      </sml:connections>
     </sml:ProcessChain>
    </sml:component>
    <!--~~~~~~~~~~~~~~~~~~-->
     <!--~~~~~~~~~~~~~~~~~~-->
     <!-- 2nd chain -->
     <!--~~~~~~~~~~~~~~~~~~-->  
     <!--~~~~~~~~~~~~~~~~~~-->
  <sml:component name="AMSR-E_generic">
   <sml:ProcessChain>
      <gml:description>
            This process chain transform the satellite view vector into the ECEF view vector.
      </gml:description>
      <!--~~~~~~~~~~~~~~~~~~-->
      <!-- Inputs & Outputs -->
      <!--~~~~~~~~~~~~~~~~~~-->
      <sml:inputs>
         <sml:InputList>
            <sml:input name="Satellite_view_vector">
               <swe:Vector definition="urn:ogc:def:data:viewVector">
                  <swe:coordinate name="x">
                     <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                      <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="y">
                     <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="z">
                     <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
               </swe:Vector>
            </sml:input>
            <sml:input name="pixelJulianTime">
               <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                <swe:uom code="s"/>  
               </swe:Time>
            </sml:input>
             <sml:input name="satelliteAngle">
                 <swe:Quantity>
                 <swe:uom code="rad"/>
                 </swe:Quantity>
             </sml:input> 
            <sml:input name="attitudeOrientation">
               <swe:Vector definition="urn:ogc:def:data:orientationVector">
                  <swe:coordinate name="x">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="y">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="z">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
               </swe:Vector>
            </sml:input> 
         </sml:InputList>
      </sml:inputs>
      <sml:outputs>
         <sml:OutputList>
            <sml:output name="ECEF_location">
               <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                  <swe:coordinate name="x">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="y">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="z">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
               </swe:Vector>
            </sml:output>       
            <sml:output name="ECEF_view_vector">
               <swe:Vector definition="urn:ogc:def:data:viewVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                  <swe:coordinate name="x">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="y">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
                  <swe:coordinate name="z">
                     <swe:Quantity>
                        <swe:uom code="m"/>
                     </swe:Quantity>
                  </swe:coordinate>
               </swe:Vector>
            </sml:output>
         </sml:OutputList>
      </sml:outputs>
      <sml:components>
         <sml:ComponentList> 
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Matrix builder from satellite to orbit with attitude angles -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->                     
            <sml:component name="MatrixBuilderOrbit">
             <sml:ProcessModel>
               <sml:inputs>
                  <sml:InputList>
                     <sml:input name="orientation">
                        <swe:Vector definition="urn:ogc:def:data:orientationVector">
                           <swe:coordinate name="z">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                               <swe:uom code="rad"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="y">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                 <swe:uom code="rad"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="x">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                 <swe:uom code="rad"/>
                              </swe:Quantity>
                           </swe:coordinate>
                        </swe:Vector>
                     </sml:input>
                  </sml:InputList>
               </sml:inputs>
               <sml:outputs>
                  <sml:OutputList>
                     <sml:output name="posMatrix">
                        <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                           <swe:elementCount>
                              <swe:Count>
                                 <swe:value>9</swe:value>
                              </swe:Count>
                           </swe:elementCount>
                           <swe:elementType name="element">
                              <swe:Quantity/>
                           </swe:elementType>
                        </swe:DataArray>
                     </sml:output>
                  </sml:OutputList>
               </sml:outputs>
               <sml:method xlink:href="urn:ogc:def:process:pos2Matrix3:1.0"/>
               </sml:ProcessModel>
            </sml:component>    
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Matrix multiplication from satellite referentiel to orbit referentiel -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~-->                    
            <sml:component name="SatelliteVectorOrbitMatrixMultiplier">
            <sml:ProcessModel>
               <sml:inputs>
                  <sml:InputList>  
                     <sml:input name="vector">
                        <swe:Vector definition="urn:ogc:def:data:viewVector">
                           <swe:coordinate name="x">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                               <swe:uom code="m"/>
                              </swe:Quantity>    
                           </swe:coordinate>
                           <swe:coordinate name="y">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                              </swe:Quantity> 
                           </swe:coordinate>
                           <swe:coordinate name="z">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                              </swe:Quantity> 
                           </swe:coordinate>
                        </swe:Vector>
                     </sml:input>            
                     <sml:input name="transformMatrix">
                        <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                           <swe:elementCount>
                              <swe:Count>
                               <swe:value>9</swe:value>  
                              </swe:Count> 
                           </swe:elementCount>
                           <swe:elementType name="element">
                              <swe:Quantity/>
                           </swe:elementType>
                        </swe:DataArray>
                     </sml:input>
                  </sml:InputList>
               </sml:inputs>
               <sml:outputs>
                  <sml:OutputList>
                     <sml:output name="newVector">
                        <swe:Vector definition="urn:ogc:def:data:viewVector">
                           <swe:coordinate name="x">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                               <swe:uom code="m"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="y">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                              </swe:Quantity>
                           </swe:coordinate>
                           <swe:coordinate name="z">
                              <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                 <swe:uom code="m"/>
                              </swe:Quantity>
                           </swe:coordinate>
                        </swe:Vector>
                     </sml:output>
                  </sml:OutputList>
               </sml:outputs>
               <sml:method xlink:href="urn:ogc:def:process:vectorMatrixMultiplication:1.0"/>
              </sml:ProcessModel>
             </sml:component>
            <!--~~~~~~~~~~~~~~-->
            <!-- TLE Provider -->
            <!--~~~~~~~~~~~~~~-->
            <sml:component name="tle">
               <sml:ProcessModel>
                  <!-- METADATA -->
                  <gml:description> Loads TLE data from a TLE data file and outputs the TLE corresponding to the requested time. </gml:description>
                  <!-- INPUTS -->
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="julianTime">
                           <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                              <swe:uom code="s"/>
                           </swe:Time>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <!-- OUTPUTS -->
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="elements">
                           <swe:DataRecord gml:id="TLE_DATA" definition="urn:ogc:def:data:noradElements">
                              <!--id="TLE_DATA"-->
                              <swe:field name="epochYear">
                                 <swe:Quantity>
                                    <swe:uom code="a_g"/>
                                 </swe:Quantity>
                              </swe:field>
                              <swe:field name="epochDay">
                                 <swe:Quantity>
                                    <swe:uom code="d"/>
                                 </swe:Quantity>
                              </swe:field>
                              <swe:field name="bstar">
                                 <swe:Quantity/>
                              </swe:field>
                              <swe:field name="inclination">
                                 <swe:Quantity>
                                    <swe:uom code="deg"/>
                                 </swe:Quantity>
                              </swe:field>
                              <swe:field name="rightAscension">
                                 <swe:Quantity>
                                    <swe:uom code="deg"/>
                                 </swe:Quantity>
                              </swe:field>
                              <swe:field name="eccentricity">
                                 <swe:Quantity/>
                              </swe:field>
                              <swe:field name="argOfPerigee">
                                 <swe:Quantity>
                                    <swe:uom code="deg"/>
                                 </swe:Quantity>
                              </swe:field>
                              <swe:field name="meanAnomaly">
                                 <swe:Quantity>
                                    <swe:uom code="deg"/>
                                 </swe:Quantity>
                              </swe:field>
                              <swe:field name="meanMotion">
                                 <swe:Quantity>
                                    <swe:uom code="d-1"/>
                                 </swe:Quantity>
                              </swe:field>
                           </swe:DataRecord>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <!-- PARAMETERS -->
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="tleDataUrl">
                           <swe:Category>
                              <swe:value>C:/aqua.txt</swe:value>
                           </swe:Category>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <!-- METHOD -->
                  <sml:method xlink:href="urn:vast:def:process:tleParser:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~-->
            <!-- SGP4 Propagator -->
            <!--~~~~~~~~~~~~~~~~~-->
            <sml:component name="sgp4">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="julianTime">
                           <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                              <swe:uom code="s"/>
                           </swe:Time>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="ECI_location">
                           <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECI_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:output>
                        <sml:output name="ECI_velocity">
                           <swe:Vector definition="urn:ogc:def:data:velocityVector" referenceFrame="urn:ogc:def:crs:ECI_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="elements" xlink:href="#TLE_DATA"/>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:ogc:def:process:SGP4:1.0"/>
               </sml:ProcessModel>
            </sml:component> 
            <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Transformation of Velocity Vector from ECI to ECEF -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="eciVelToEcef">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="julianTime">
                           <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                            <swe:uom code="s"/>  
                           </swe:Time>
                        </sml:input>
                        <sml:input name="ECI_velocity">
                           <swe:Vector definition="urn:ogc:def:data:velocityVector" referenceFrame="urn:ogc:def:crs:ECI_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="ECEF_velocity">
                           <swe:Vector definition="urn:ogc:def:data:velocityVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:method xlink:href="urn:ogc:def:process:eciVelToEcef:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Transformation of Location Vector from ECI to ECEF -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="eciToEcef">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="julianTime">
                           <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                              <swe:uom code="s"/>  
                           </swe:Time>
                        </sml:input>
                        <sml:input name="ECI_location">
                           <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECI_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="ECEF_location">
                           <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:method xlink:href="urn:ogc:def:process:eciToEcef:1.0"/>
               </sml:ProcessModel>
            </sml:component>
            <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
            <!-- Geocentric Pointing Position -->
            <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
            <sml:component name="nadirPointing">
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>
                        <sml:input name="location">
                           <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>
                        <sml:input name="velocity">
                           <swe:Vector definition="urn:ogc:def:data:velocityVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                              <swe:coordinate name="x">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity>
                                    <swe:uom code="m/s"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="posMatrix">
                           <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>9</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType name="element">
                                 <swe:Quantity/>
                              </swe:elementType>
                           </swe:DataArray>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:parameters>
                     <sml:ParameterList>
                        <sml:parameter name="upAxis">
                           <swe:Category>
                              <swe:value>Z</swe:value>
                           </swe:Category>
                        </sml:parameter>
                        <sml:parameter name="forwardAxis">
                           <swe:Category>
                              <swe:value>X</swe:value>
                           </swe:Category>
                        </sml:parameter>
                     </sml:ParameterList>
                  </sml:parameters>
                  <sml:method xlink:href="urn:ogc:def:process:nadirPointing3:1.0"/>
               </sml:ProcessModel>
            </sml:component>
             <!--~~~~~~~~~~~~~~~~~~~~~~~-->
             <!-- Matrix builder from satellite rotation -->
             <!--~~~~~~~~~~~~~~~~~~~~~~~-->                     
             <sml:component name="MatrixBuilderRotation">
                 <sml:ProcessModel>
                     <sml:inputs>
                         <sml:InputList>
                             <sml:input name="orientation">
                                 <swe:Vector definition="urn:ogc:def:data:orientationVector">
                                     <swe:coordinate name="x">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                             <swe:uom code="rad"/>
                                             <swe:value>0.0</swe:value>
                                         </swe:Quantity>
                                     </swe:coordinate>
                                     <swe:coordinate name="y">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                             <swe:uom code="rad"/>
                                             <swe:value>0.0</swe:value>
                                         </swe:Quantity>
                                     </swe:coordinate>
                                     <swe:coordinate name="z">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:angle">
                                             <swe:uom code="rad"/>
                                         </swe:Quantity>
                                     </swe:coordinate>
                                 </swe:Vector>
                             </sml:input>
                         </sml:InputList>
                     </sml:inputs>
                     <sml:outputs>
                         <sml:OutputList>
                             <sml:output name="posMatrix">
                                 <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                                     <swe:elementCount>
                                         <swe:Count>
                                             <swe:value>9</swe:value>
                                         </swe:Count>
                                     </swe:elementCount>
                                     <swe:elementType name="element">
                                         <swe:Quantity/>
                                     </swe:elementType>
                                 </swe:DataArray>
                             </sml:output>
                         </sml:OutputList>
                     </sml:outputs>
                     <sml:method xlink:href="urn:ogc:def:process:pos2Matrix3:1.0"/>
                 </sml:ProcessModel>
             </sml:component>    
             <!--~~~~~~~~~~~~~~~~~~~~~~~-->
             <!-- Matrix multiplication for satellite rotation -->
             <!--~~~~~~~~~~~~~~~~~~~~~~~-->                    
             <sml:component name="SatelliteRotationtMatrixMultiplier">
                 <sml:ProcessModel>
                     <sml:inputs>
                         <sml:InputList>  
                             <sml:input name="vector">
                                 <swe:Vector definition="urn:ogc:def:data:viewVector">
                                     <swe:coordinate name="x">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                             <swe:uom code="m"/>
                                         </swe:Quantity>    
                                     </swe:coordinate>
                                     <swe:coordinate name="y">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                             <swe:uom code="m"/>
                                         </swe:Quantity> 
                                     </swe:coordinate>
                                     <swe:coordinate name="z">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                             <swe:uom code="m"/>
                                         </swe:Quantity> 
                                     </swe:coordinate>
                                 </swe:Vector>
                             </sml:input>            
                             <sml:input name="transformMatrix">
                                 <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                                     <swe:elementCount>
                                         <swe:Count>
                                             <swe:value>9</swe:value>  
                                         </swe:Count> 
                                     </swe:elementCount>
                                     <swe:elementType name="element">
                                         <swe:Quantity/>
                                     </swe:elementType>
                                 </swe:DataArray>
                             </sml:input>
                         </sml:InputList>
                     </sml:inputs>
                     <sml:outputs>
                         <sml:OutputList>
                             <sml:output name="newVector">
                                 <swe:Vector definition="urn:ogc:def:data:viewVector">
                                     <swe:coordinate name="x">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                             <swe:uom code="m"/>
                                         </swe:Quantity>
                                     </swe:coordinate>
                                     <swe:coordinate name="y">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                             <swe:uom code="m"/>
                                         </swe:Quantity>
                                     </swe:coordinate>
                                     <swe:coordinate name="z">
                                         <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                             <swe:uom code="m"/>
                                         </swe:Quantity>
                                     </swe:coordinate>
                                 </swe:Vector>
                             </sml:output>
                         </sml:OutputList>
                     </sml:outputs>
                     <sml:method xlink:href="urn:ogc:def:process:vectorMatrixMultiplication:1.0"/>
                 </sml:ProcessModel>
             </sml:component>
               <!--~~~~~~~~~~~~~~~~~~~~~~~-->
               <!-- Matrix multiplication from satellite referentiel to orbit referentiel -->
               <!--~~~~~~~~~~~~~~~~~~~~~~~-->   
            <sml:component name="OrbitVectorECEFMatrixMultiplier">                 
               <sml:ProcessModel>
                  <sml:inputs>
                     <sml:InputList>  
                        <sml:input name="vector">
                           <swe:Vector definition="urn:ogc:def:data:viewVector">
                              <swe:coordinate name="x">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                  <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:input>            
                        <sml:input name="transformMatrix">
                           <swe:DataArray definition="urn:ogc:def:data:positionMatrix">
                              <swe:elementCount>
                                 <swe:Count>
                                    <swe:value>9</swe:value>
                                 </swe:Count>
                              </swe:elementCount>
                              <swe:elementType name="element">
                                 <swe:Quantity/>
                              </swe:elementType>
                           </swe:DataArray>
                        </sml:input>
                     </sml:InputList>
                  </sml:inputs>
                  <sml:outputs>
                     <sml:OutputList>
                        <sml:output name="newVector">
                           <swe:Vector definition="urn:ogc:def:data:viewVector">
                              <swe:coordinate name="x">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="y">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                              <swe:coordinate name="z">
                                 <swe:Quantity definition="urn:ogc:def:phenomenon:distance">
                                    <swe:uom code="m"/>
                                 </swe:Quantity>
                              </swe:coordinate>
                           </swe:Vector>
                        </sml:output>
                     </sml:OutputList>
                  </sml:outputs>
                  <sml:method xlink:href="urn:ogc:def:process:vectorMatrixMultiplication:1.0"/>
                  </sml:ProcessModel>
                </sml:component>
         </sml:ComponentList>
      </sml:components>
      <!--~~~~~~~~~~~~~-->
      <!-- Connections -->
      <!--~~~~~~~~~~~~~-->
      <sml:connections>
         <sml:ConnectionList>
            <!-- Time Input to Processes -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/pixelJulianTime"/>
                  <sml:destination ref="tle/inputs/julianTime"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/pixelJulianTime"/>
                  <sml:destination ref="sgp4/inputs/julianTime"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/pixelJulianTime"/>
                  <sml:destination ref="eciToEcef/inputs/julianTime"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/pixelJulianTime"/>
                  <sml:destination ref="eciVelToEcef/inputs/julianTime"/>
               </sml:Link>
            </sml:connection>
            <!-- LUTattitude to matrixbuilderorbit -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/attitudeOrientation/z"/>
                  <sml:destination ref="MatrixBuilderOrbit/inputs/orientation/z"/>
               </sml:Link>
            </sml:connection>     
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/attitudeOrientation/y"/>
                  <sml:destination ref="MatrixBuilderOrbit/inputs/orientation/y"/>
               </sml:Link>
            </sml:connection>     
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/attitudeOrientation/x"/>
                  <sml:destination ref="MatrixBuilderOrbit/inputs/orientation/x"/>
               </sml:Link>
            </sml:connection> 
            <!-- Matrix3_3builderorbit to SatelliteVectorOrbitMatrixMultiplier -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="MatrixBuilderOrbit/outputs/posMatrix"/>
                  <sml:destination ref="SatelliteVectorOrbitMatrixMultiplier/inputs/transformMatrix"/>
               </sml:Link>
            </sml:connection>
            <!-- satellite view vector to SatelliteVectorOrbitMatrixMultiplier -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/Satellite_view_vector"/>
                  <sml:destination ref="SatelliteVectorOrbitMatrixMultiplier/inputs/vector"/>
               </sml:Link>
            </sml:connection> 
            <!-- TLE to SGP4 -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="tle/outputs/elements"/>
                  <sml:destination ref="sgp4/parameters/elements"/>
               </sml:Link>
            </sml:connection>
            <!-- SGP4 to ECI/ECEF converters -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="sgp4/outputs/ECI_location"/>
                  <sml:destination ref="eciToEcef/inputs/ECI_location"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="sgp4/outputs/ECI_velocity"/>
                  <sml:destination ref="eciVelToEcef/inputs/ECI_velocity"/>
               </sml:Link>
            </sml:connection>
            <!-- ECI/ECEF converters to Geocentric Pointing -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="eciToEcef/outputs/ECEF_location"/>
                  <sml:destination ref="nadirPointing/inputs/location"/>
               </sml:Link>
            </sml:connection>
            <sml:connection>
               <sml:Link>
                  <sml:source ref="eciVelToEcef/outputs/ECEF_velocity"/>
                  <sml:destination ref="nadirPointing/inputs/velocity"/>
               </sml:Link>
            </sml:connection>  
            <!-- satellite angle to Matrix3_3builderrotation -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="this/inputs/satelliteAngle"/>
                  <sml:destination ref="MatrixBuilderRotation/inputs/orientation/z"/>
               </sml:Link>
            </sml:connection>
            <!-- Matrix3_3builderrotation to satellite view vector to SatelliteVectorOrbitMatrixMultiplier -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="MatrixBuilderRotation/outputs/posMatrix"/>
                  <sml:destination ref="SatelliteRotationtMatrixMultiplier/inputs/transformMatrix"/>
               </sml:Link>
            </sml:connection>   
            <!-- orbit view vector to satellite view vector to SatelliteVectorOrbitMatrixMultiplier -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="SatelliteVectorOrbitMatrixMultiplier/outputs/newVector"/>
                  <sml:destination ref="SatelliteRotationtMatrixMultiplier/inputs/vector"/>
               </sml:Link>
            </sml:connection>      
            <!-- Nadir pointing matrix to orbit view vector to OrbitVectorEcefMatrixMultiplier -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="nadirPointing/outputs/posMatrix"/>
                  <sml:destination ref="OrbitVectorECEFMatrixMultiplier/inputs/transformMatrix"/>
               </sml:Link>
            </sml:connection> 
            <!-- orbit view vector to OrbitVectorEcefMatrixMultiplier -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="SatelliteRotationtMatrixMultiplier/outputs/newVector"/>
                  <sml:destination ref="OrbitVectorECEFMatrixMultiplier/inputs/vector"/>
               </sml:Link>
            </sml:connection> 
            <!-- last processes outputs to chain outputs -->
            <sml:connection>
               <sml:Link>
                  <sml:source ref="OrbitVectorECEFMatrixMultiplier/outputs/newVector"/>
                  <sml:destination ref="this/outputs/ECEF_view_vector"/>
               </sml:Link>
            </sml:connection> 
            <sml:connection>
               <sml:Link>
                  <sml:source ref="eciToEcef/outputs/ECEF_location"/>
                  <sml:destination ref="this/outputs/ECEF_location"/>
               </sml:Link>
            </sml:connection> 
         </sml:ConnectionList>
      </sml:connections>
   </sml:ProcessChain>
  </sml:component>  
  </sml:ComponentList>
 </sml:components>
   <!--~~~~~~~~~~~~~-->
   <!-- Connections -->
   <!--~~~~~~~~~~~~~-->
   <sml:connections>
      <sml:ConnectionList>     
         <sml:connection>
            <sml:Link>
               <sml:source ref="this/inputs/channelNumber"/>
               <sml:destination ref="AMSR-E_specific/inputs/channelNumber"/>
            </sml:Link>
         </sml:connection>          
         <sml:connection>
            <sml:Link>
               <sml:source ref="this/inputs/pixel"/>
               <sml:destination ref="AMSR-E_specific/inputs/pixel"/>
            </sml:Link>
         </sml:connection> 
         <sml:connection>
            <sml:Link>
               <sml:source ref="this/inputs/attitudeOrientation"/>
               <sml:destination ref="AMSR-E_generic/inputs/attitudeOrientation"/>
            </sml:Link>
         </sml:connection> 
         <sml:connection>
            <sml:Link>
               <sml:source ref="this/inputs/julianTime"/>
               <sml:destination ref="AMSR-E_specific/inputs/julianTime"/>
            </sml:Link>
         </sml:connection>  
         <sml:connection>
            <sml:Link>
               <sml:source ref="this/inputs/satelliteAngle"/>
                <sml:destination ref="AMSR-E_generic/inputs/satelliteAngle"/>
            </sml:Link>
         </sml:connection>  
         <sml:connection>
            <sml:Link>
               <sml:source ref="AMSR-E_specific/outputs/pixelJulianTime"/>
               <sml:destination ref="AMSR-E_generic/inputs/pixelJulianTime"/>
            </sml:Link>
         </sml:connection>  
          <sml:connection>
              <sml:Link>
                  <sml:source ref="AMSR-E_specific/outputs/Satellite_view_vector"/>
                  <sml:destination ref="AMSR-E_generic/inputs/Satellite_view_vector"/>
              </sml:Link>
          </sml:connection>  
         <sml:connection>
            <sml:Link>
               <sml:source ref="AMSR-E_generic/outputs/ECEF_location"/>
               <sml:destination ref="this/outputs/geolocationData/ECEF_location"/>
            </sml:Link>
         </sml:connection>  
         <sml:connection>
            <sml:Link>
                <sml:source ref="AMSR-E_generic/outputs/ECEF_view_vector"/>
               <sml:destination ref="this/outputs/geolocationData/ECEF_view_vector"/>
            </sml:Link>
         </sml:connection>  
      </sml:ConnectionList>
  </sml:connections>    
 </sml:ProcessChain>
    </sml:member>      
</sml:SensorML>
