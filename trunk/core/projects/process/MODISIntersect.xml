<?xml version="1.0" encoding="UTF-8"?>
<sml:SensorML xmlns:gml="http://www.opengis.net/gml" xmlns:sml="http://www.opengis.net/sensorML/1.0" xmlns:swe="http://www.opengis.net/swe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/sensorML/1.0 file:///D:/Sensia/Projects/SensorML/Schema/sensorML/sensorML.xsd" version="1.0">
   <sml:member>
      <sml:ProcessChain>
         <gml:description> This process chain determines MODIS position vector and the ECEF view vector. This chain is composed of 2 chain, one specific to MODIS, the other is generic. </gml:description>
         <gml:name>MODIS</gml:name>
         <sml:inputs>
            <sml:InputList>
               <sml:input name="julianTime">
                  <swe:Time definition="urn:ogc:def:phenomenon:time" referenceFrame="urn:ogc:def:crs:julianTime">
                     <swe:uom code="s"/>
                  </swe:Time>
               </sml:input>
               <sml:input name="Along_scan_pixel">
                  <swe:Quantity/>
               </sml:input>
               <sml:input name="Along_track_pixel">
                  <swe:Quantity/>
               </sml:input>
               <sml:input name="Band_number">
                  <swe:Quantity/>
               </sml:input>
            </sml:InputList>
         </sml:inputs>
         <sml:outputs>
            <sml:OutputList>
               <sml:output name="LLA_location">
                  <swe:Vector definition="urn:ogc:def:data:locationVector" referenceFrame="urn:ogc:def:crs:ECEF_wgs84">
                     <swe:coordinate name="lat">
                        <swe:Quantity>
                           <swe:uom code="rad"/>
                        </swe:Quantity>
                     </swe:coordinate>
                     <swe:coordinate name="lon">
                        <swe:Quantity>
                           <swe:uom code="rad"/>
                        </swe:Quantity>
                     </swe:coordinate>
                     <swe:coordinate name="alt">
                        <swe:Quantity>
                           <swe:uom code="m"/>
                        </swe:Quantity>
                     </swe:coordinate>
                  </swe:Vector>
               </sml:output>
            </sml:OutputList>
         </sml:outputs>
         <sml:components>
            <sml:ComponentList>
               <sml:component name="modis" xlink:href="./MODIS.xml#MODIS_GEOLOCATION"/>
               <sml:component name="rayIntersectEllipsoid">
                  <sml:ProcessModel>
                     <sml:inputs>
                        <sml:InputList>
                           <sml:input name="rayOrigin">
                              <swe:Vector definition="urn:ogc:def:data:locationVector">
                                 <swe:coordinate name="x">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="y">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="z">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                              </swe:Vector>
                           </sml:input>
                           <sml:input name="rayDirection">
                              <swe:Vector definition="urn:ogc:def:data:directionVector">
                                 <swe:coordinate name="x">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="y">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="z">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                              </swe:Vector>
                           </sml:input>
                        </sml:InputList>
                     </sml:inputs>
                     <sml:outputs>
                        <sml:OutputList>
                           <sml:output name="intersection">
                              <swe:Vector definition="urn:ogc:def:data:locationVector">
                                 <swe:coordinate name="x">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="y">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="z">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                              </swe:Vector>
                           </sml:output>
                        </sml:OutputList>
                     </sml:outputs>
                     <sml:method xlink:href="urn:ogc:def:process:rayIntersectEllipsoid:1.0"/>
                  </sml:ProcessModel>
               </sml:component>
               <sml:component name="ecef2lla">
                  <sml:ProcessModel>
                     <sml:inputs>
                        <sml:InputList>
                           <sml:input name="ecefLocation">
                              <swe:Vector definition="urn:ogc:def:data:locationVector">
                                 <swe:coordinate name="x">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="y">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="z">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                              </swe:Vector>
                           </sml:input>
                        </sml:InputList>
                     </sml:inputs>
                     <sml:outputs>
                        <sml:OutputList>
                           <sml:output name="geoLocation">
                              <swe:Vector definition="urn:ogc:def:data:locationVector">
                                 <swe:coordinate name="latitude">
                                    <swe:Quantity>
                                       <swe:uom code="rad"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="longitude">
                                    <swe:Quantity>
                                       <swe:uom code="rad"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                                 <swe:coordinate name="altitude">
                                    <swe:Quantity>
                                       <swe:uom code="m"/>
                                    </swe:Quantity>
                                 </swe:coordinate>
                              </swe:Vector>
                           </sml:output>
                        </sml:OutputList>
                     </sml:outputs>
                     <sml:method xlink:href="urn:ogc:def:process:ECEFToLLA:1.0"/>
                  </sml:ProcessModel>
               </sml:component>
            </sml:ComponentList>
         </sml:components>
         <!--~~~~~~~~~~~~~-->
         <!-- Connections -->
         <!--~~~~~~~~~~~~~-->
         <sml:connections>
            <sml:ConnectionList>               
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="this/inputs/julianTime"/>
                     <sml:destination ref="modis/inputs/julianTime"/>
                  </sml:Link>
               </sml:connection>
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="this/inputs/Along_scan_pixel"/>
                     <sml:destination ref="modis/inputs/Along_scan_pixel"/>
                  </sml:Link>
               </sml:connection>
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="this/inputs/Along_track_pixel"/>
                     <sml:destination ref="modis/inputs/Along_track_pixel"/>
                  </sml:Link>
               </sml:connection>
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="this/inputs/Band_number"/>
                     <sml:destination ref="modis/inputs/Band_number"/>
                  </sml:Link>
               </sml:connection>
               <!-- -->
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="modis/outputs/ECEF_location"/>
                     <sml:destination ref="rayIntersectEllipsoid/inputs/rayOrigin"/>
                  </sml:Link>
               </sml:connection>
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="modis/outputs/ECEF_view_vector"/>
                     <sml:destination ref="rayIntersectEllipsoid/inputs/rayDirection"/>
                  </sml:Link>
               </sml:connection>
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="rayIntersectEllipsoid/outputs/intersection"/>
                     <sml:destination ref="ecef2lla/inputs/ecefLocation"/>
                  </sml:Link>
               </sml:connection>
               <!-- -->
               <sml:connection>
                  <sml:Link>
                     <sml:source ref="ecef2lla/outputs/geoLocation"/>
                     <sml:destination ref="this/outputs/LLA_location"/>
                  </sml:Link>
               </sml:connection>
            </sml:ConnectionList>
         </sml:connections>
      </sml:ProcessChain>
   </sml:member>
</sml:SensorML>
